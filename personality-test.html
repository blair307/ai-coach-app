<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><defs><linearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'><stop offset='0%25' stop-color='%236366f1'/><stop offset='100%25' stop-color='%234f46e5'/></linearGradient></defs><rect width='32' height='32' fill='url(%23g)'/><text x='16' y='20' font-family='Arial' font-size='10' font-weight='bold' text-anchor='middle' fill='white'>EEH</text></svg>">
    <title>Personality Assessment - Entrepreneur Emotional Health</title>
    <link rel="stylesheet" href="styles.css">

<style>
  .assessment-container {
    max-width: 900px;
    margin: 0 auto;
    padding: 2rem;
}

.assessment-header {
    text-align: center;
    margin-bottom: 3rem;
    padding: 3rem 2rem 2rem;
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.08) 0%, rgba(139, 92, 246, 0.08) 50%, rgba(14, 165, 233, 0.08) 100%);
    border-radius: var(--radius-lg);
    position: relative;
    overflow: hidden;
}

.assessment-header::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(99, 102, 241, 0.1) 0%, transparent 50%);
    animation: float 6s ease-in-out infinite;
}

@keyframes float {
    0%, 100% { transform: translateY(0px) rotate(0deg); }
    50% { transform: translateY(-20px) rotate(180deg); }
}

.assessment-header h1 {
    font-size: 2.8rem;
    font-weight: 900;
    background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #0ea5e9 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 1rem;
    position: relative;
    z-index: 2;
}

.assessment-header p {
    font-size: 1.2rem;
    color: var(--text-secondary);
    position: relative;
    z-index: 2;
}

.assessment-intro {
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.05) 0%, rgba(245, 158, 11, 0.05) 100%);
    padding: 2.5rem;
    border-radius: var(--radius-lg);
    border: 1px solid rgba(16, 185, 129, 0.2);
    margin-bottom: 3rem;
    box-shadow: 0 8px 32px rgba(16, 185, 129, 0.1);
    position: relative;
    overflow: hidden;
}

.assessment-intro h3 {
    font-size: 1.6rem;
    font-weight: 800;
    margin-bottom: 1.5rem;
    background: linear-gradient(135deg, #10b981 0%, #f59e0b 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.assessment-intro ul li {
    margin-bottom: 1rem;
    display: flex;
    align-items: flex-start;
    font-size: 1.05rem;
    line-height: 1.6;
    padding: 0.5rem;
    border-radius: 8px;
    transition: all 0.3s ease;
}

.assessment-intro ul li:hover {
    background: rgba(16, 185, 129, 0.1);
    transform: translateX(5px);
}

.assessment-intro ul li span {
    background: linear-gradient(135deg, #10b981 0%, #f59e0b 100%);
    color: white;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 1rem;
    font-size: 0.9rem;
    font-weight: 700;
    flex-shrink: 0;
    margin-top: 0.1rem;
}

.question-container {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(248, 250, 252, 0.9) 100%);
    border-radius: var(--radius-lg);
    padding: 2.5rem;
    margin-bottom: 2rem;
    border: 1px solid var(--border);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.08);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.question-container::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #0ea5e9 100%);
}

.question-container:hover {
    box-shadow: 0 16px 48px rgba(99, 102, 241, 0.15);
    transform: translateY(-2px);
}

.question-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
}

.question-number {
    background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
    color: white;
    width: 55px;
    height: 55px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 900;
    font-size: 1.3rem;
    box-shadow: 0 8px 24px rgba(99, 102, 241, 0.4);
    position: relative;
}

.question-number::after {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
    border-radius: 50%;
    z-index: -1;
    opacity: 0.3;
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0%, 100% { transform: scale(1); opacity: 0.3; }
    50% { transform: scale(1.1); opacity: 0.1; }
}

.progress-bar {
    flex: 1;
    height: 12px;
    background: rgba(99, 102, 241, 0.1);
    border-radius: 10px;
    margin: 0 1.5rem;
    overflow: hidden;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
    position: relative;
}

.progress-bar::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.3) 50%, transparent 100%);
    animation: shimmer 2s infinite;
}

@keyframes shimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

.progress-fill {
    height: 100%;
    background: linear-gradient(135deg, #10b981 0%, #6366f1 50%, #8b5cf6 100%);
    border-radius: 10px;
    transition: width 0.8s ease;
    width: 0%;
    box-shadow: 0 2px 12px rgba(99, 102, 241, 0.4);
    position: relative;
    overflow: hidden;
}

.progress-fill::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.4) 50%, transparent 100%);
    animation: progressShine 2s infinite;
}

@keyframes progressShine {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

.progress-text {
    font-size: 1.1rem;
    font-weight: 800;
    min-width: 80px;
    text-align: right;
    background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.question-text {
    font-size: 1.5rem;
    font-weight: 800;
    background: linear-gradient(135deg, #1f2937 0%, #374151 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 2.5rem;
    line-height: 1.4;
    text-align: center;
    position: relative;
}

.options-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.option {
    padding: 2rem;
    border: 2px solid var(--border);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all 0.4s ease;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(248, 250, 252, 0.9) 100%);
    font-size: 1.1rem;
    line-height: 1.5;
    position: relative;
    overflow: hidden;
    font-weight: 500;
}

.option::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.08) 0%, rgba(14, 165, 233, 0.08) 100%);
    transition: left 0.4s ease;
}

.option:hover {
    border-color: var(--primary);
    transform: translateY(-6px);
    box-shadow: 0 12px 40px rgba(99, 102, 241, 0.25);
}

.option:hover::before {
    left: 0;
}

.option.selected {
    border-color: var(--primary);
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.15) 0%, rgba(14, 165, 233, 0.15) 100%);
    font-weight: 700;
    transform: translateY(-4px);
    box-shadow: 0 12px 40px rgba(99, 102, 241, 0.35);
    position: relative;
}

.option.selected::after {
    content: '✓';
    position: absolute;
    top: 1rem;
    right: 1.5rem;
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    color: white;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 900;
    font-size: 1rem;
    animation: checkmark 0.3s ease;
}

@keyframes checkmark {
    0% { transform: scale(0) rotate(0deg); }
    50% { transform: scale(1.2) rotate(180deg); }
    100% { transform: scale(1) rotate(360deg); }
}

.navigation-buttons {
    display: flex;
    justify-content: space-between;
    margin-top: 3rem;
    gap: 1.5rem;
}

.btn-nav {
    padding: 1.2rem 3rem;
    border: none;
    border-radius: var(--radius-lg);
    font-weight: 800;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 1.1rem;
    min-width: 180px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.btn-prev {
    background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
    color: var(--text-primary);
    border: 2px solid var(--border);
}

.btn-prev:hover {
    border-color: var(--primary);
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.08) 0%, rgba(14, 165, 233, 0.08) 100%);
    transform: translateY(-3px);
    box-shadow: 0 8px 24px rgba(99, 102, 241, 0.2);
}

.btn-next {
    background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
    color: white;
    box-shadow: 0 8px 24px rgba(99, 102, 241, 0.4);
    position: relative;
    overflow: hidden;
}

.btn-next::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.2) 50%, transparent 100%);
    transition: left 0.6s ease;
}

.btn-next:hover::before {
    left: 100%;
}

.btn-next:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 32px rgba(99, 102, 241, 0.5);
}

.btn-next:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.2);
}

.btn-next:disabled:hover {
    transform: none;
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.2);
}

.assessment-complete {
    text-align: center;
    padding: 4rem 2rem;
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.08) 0%, rgba(139, 92, 246, 0.08) 50%, rgba(14, 165, 233, 0.08) 100%);
    border-radius: var(--radius-lg);
    position: relative;
    overflow: hidden;
}

.assessment-complete h2 {
    font-size: 2.2rem;
    font-weight: 800;
    background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 1rem;
}

.loading-spinner {
    border: 4px solid rgba(99, 102, 241, 0.2);
    border-top: 4px solid #6366f1;
    border-radius: 50%;
    width: 60px;
    height: 60px;
    animation: spin 1s linear infinite;
    margin: 2rem auto;
    position: relative;
}

.loading-spinner::after {
    content: '';
    position: absolute;
    top: -4px;
    left: -4px;
    right: -4px;
    bottom: -4px;
    border: 2px solid rgba(139, 92, 246, 0.3);
    border-radius: 50%;
    animation: spin 2s linear infinite reverse;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.start-button {
    background: linear-gradient(135deg, #10b981 0%, #6366f1 50%, #8b5cf6 100%);
    color: white;
    padding: 1.5rem 4rem;
    font-size: 1.3rem;
    font-weight: 900;
    border: none;
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all 0.4s ease;
    box-shadow: 0 12px 32px rgba(99, 102, 241, 0.4);
    text-transform: uppercase;
    letter-spacing: 1px;
    position: relative;
    overflow: hidden;
}

.start-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.3) 50%, transparent 100%);
    transition: left 0.6s ease;
}

.start-button:hover::before {
    left: 100%;
}

.start-button:hover {
    transform: translateY(-6px) scale(1.05);
    box-shadow: 0 16px 40px rgba(99, 102, 241, 0.5);
}

@media (max-width: 768px) {
    .assessment-container {
        padding: 1rem;
    }

    .assessment-header h1 {
        font-size: 2.2rem;
    }

    .question-text {
        font-size: 1.3rem;
    }

    .option {
        padding: 1.5rem;
        font-size: 1rem;
    }

    .navigation-buttons {
        flex-direction: column;
    }

    .btn-nav {
        width: 100%;
        min-width: auto;
    }

    .question-number {
        width: 45px;
        height: 45px;
        font-size: 1.1rem;
    }

    .progress-text {
        font-size: 1rem;
    }

    .start-button {
        padding: 1.25rem 3rem;
        font-size: 1.1rem;
    }
}

.hidden {
    display: none !important;
}
</style>

 
</head>
<body>
    <div class="app-container">
        <!-- Universal Hamburger Menu -->
        <button class="universal-hamburger" onclick="toggleSidebar()" aria-label="Toggle navigation menu">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
        </button>

        <!-- Sidebar Navigation -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2>EEH</h2>
            </div>
            <ul class="sidebar-menu">
                <li><a href="dashboard.html" class="menu-item">Dashboard</a></li>
                <li><a href="ai-coach.html" class="menu-item">AI Coach</a></li>
                <li><a href="community.html" class="menu-item">Community</a></li>
                <li><a href="goals.html" class="menu-item">Goals</a></li>
                <li><a href="daily-tracker.html" class="menu-item">Daily Tracker</a></li>
                <li><a href="daily-prompt.html" class="menu-item">Daily Prompt</a></li>
                <li><a href="personality-test.html" class="menu-item active">Personality Test</a></li>
                <li><a href="billing.html" class="menu-item">Billing</a></li>
                <li><a href="settings.html" class="menu-item">Settings</a></li>
                <li><a href="#" class="menu-item" onclick="logout()">Logout</a></li>
            </ul>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <div class="assessment-container">
                <!-- Assessment Introduction -->
                <div id="assessmentIntro">
                    <div class="assessment-header">
                        <h1>Alivist Personality Assessment</h1>
                        <p style="color: var(--text-secondary); font-size: 1.1rem; margin-top: 1rem;">
                            Discover your top three personality characteristics through our comprehensive 64-question assessment
                        </p>
                    </div>

                    <div class="assessment-intro">
                        <h3 style="margin-bottom: 1rem; color: var(--primary);">What You'll Discover:</h3>
                        <ul style="list-style: none; padding: 0; margin: 0;">
                            <li style="margin-bottom: 0.75rem; display: flex; align-items: center;">
                                <span style="color: var(--primary); margin-right: 0.5rem;">✓</span>
                                Your top 3 personality characteristics from 16 unique types
                            </li>
                            <li style="margin-bottom: 0.75rem; display: flex; align-items: center;">
                                <span style="color: var(--primary); margin-right: 0.5rem;">✓</span>
                                Detailed insights about your authentic self and growth areas
                            </li>
                            <li style="margin-bottom: 0.75rem; display: flex; align-items: center;">
                                <span style="color: var(--primary); margin-right: 0.5rem;">✓</span>
                                Visual charts showing your complete personality profile
                            </li>
                            <li style="margin-bottom: 0.75rem; display: flex; align-items: center;">
                                <span style="color: var(--primary); margin-right: 0.5rem;">✓</span>
                                Downloadable PDF report with your complete results
                            </li>
                        </ul>

                        <div style="margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid var(--border);">
                            <p style="margin: 0; color: var(--text-secondary); font-size: 0.9rem;">
                                <strong>Time to complete:</strong> 10-15 minutes | <strong>Questions:</strong> 64 | <strong>Results:</strong> Immediate
                            </p>
                        </div>
                    </div>

                    <div style="text-align: center;">
<button class="start-button" onclick="startAssessment()">
    Start Assessment
                        </button>
                    </div>
                </div>

                <!-- Assessment Questions -->
                <div id="assessmentQuestions" class="hidden">
                    <div class="question-container">
                        <div class="question-header">
                            <div class="question-number" id="questionNumber">1</div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressFill"></div>
                            </div>
                            <div class="progress-text" id="progressText">1 / 64</div>
                        </div>

                        <div class="question-text" id="questionText">
                            Loading question...
                        </div>

                        <div class="options-container" id="optionsContainer">
                            <!-- Options will be populated by JavaScript -->
                        </div>

                        <div class="navigation-buttons">
                            <button class="btn-nav btn-prev" id="prevBtn" onclick="previousQuestion()" style="display: none;">
                                Previous
                            </button>
                            <button class="btn-nav btn-next" id="nextBtn" onclick="nextQuestion()" disabled>
                                Next Question
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Assessment Complete -->
                <div id="assessmentComplete" class="hidden">
                    <div class="assessment-complete">
                        <div class="loading-spinner" id="loadingSpinner"></div>
                        <h2>Calculating Your Results...</h2>
                        <p style="color: var(--text-secondary); margin-top: 1rem;">
                            Please wait while we analyze your responses and generate your personalized personality report.
                        </p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="sidebar-toggle.js"></script>
    <script>
        // Assessment data and logic will go here
     let currentQuestionIndex = 0;
        let userAnswers = [];
        let loadedQuestions = [];
        
// All 64 questions from your CSV
        const assessmentQuestions = [
            {
                id: 1,
                question: "I prefer to:",
                optionA: "Help others process their emotions",
                typeA: "Healer",
                optionB: "Create innovative solutions to problems",
                typeB: "Creator"
            },
            {
                id: 2,
                question: "I'm more energized by:",
                optionA: "Making sure everyone feels included",
                typeA: "Peacemaker",
                optionB: "Taking charge and directing projects",
                typeB: "Director"
            },
            {
                id: 3,
                question: "I naturally:",
                optionA: "Get energized by inluencing others to take action",
                typeA: "Motivator",
                optionB: "Notice ways to improve systems",
                typeB: "Problem-Solver"
            },
            {
                id: 4,
                question: "I'm better at:",
                optionA: "Getting people excited about possibilities",
                typeA: "Promoter",
                optionB: "Implementing practical solutions",
                typeB: "Implementer"
            },
            {
                id: 5,
                question: "I tend to:",
                optionA: "Have strong faith in positive outcomes",
                typeA: "Believer",
                optionB: "Think deeply about complex issues",
                typeB: "Thinker"
            },
            {
                id: 6,
                question: "I prefer to:",
                optionA: "Make others laugh and feel good",
                typeA: "Entertainer",
                optionB: "Stand firm against harmful behaviors",
                typeB: "Protector"
            },
            {
                id: 7,
                question: "I'm more likely to:",
                optionA: "Improve what I'm working on",
                typeA: "Actualizer",
                optionB: "Get things done efficiently",
                typeB: "Executor"
            },
            {
                id: 8,
                question: "I naturally:",
                optionA: "Help others reach their full potential",
                typeA: "Actualizer",
                optionB: "Am aware of others' emotional states",
                typeB: "Peacemaker"
            },
            {
                id: 9,
                question: "I'm more comfortable:",
                optionA: "Analyzing all sides of a complex situation",
                typeA: "Thinker",
                optionB: "Making an immediate impact on a problem",
                typeB: "Executor"
            },
            {
                id: 10,
                question: "I naturally:",
                optionA: "Light up a room with my energy",
                typeA: "Entertainer",
                optionB: "Guide others toward better versions of themselves",
                typeB: "Actualizer"
            },
            {
                id: 11,
                question: "I prefer to:",
                optionA: "Bring peace to tense situations",
                typeA: "Peacemaker",
                optionB: "Share my enthusiasm for things I value",
                typeB: "Promoter"
            },
            {
                id: 12,
                question: "I'm more likely to:",
                optionA: "Listen deeply to others' struggles",
                typeA: "Healer",
                optionB: "Take bold action when something isn't right",
                typeB: "Protector"
            },
            {
                id: 13,
                question: "I tend to:",
                optionA: "See possibilities beyond current limitations",
                typeA: "Dreamer",
                optionB: "Know how to bring projects to completion",
                typeB: "Implementer"
            },
            {
                id: 14,
                question: "I'm energized by:",
                optionA: "Understanding others' life stories",
                typeA: "Relater",
                optionB: "Moving groups toward clear goals",
                typeB: "Director"
            },
            {
                id: 15,
                question: "I'm better at:",
                optionA: "Seeing ways to enhance existing systems",
                typeA: "Problem-Solver",
                optionB: "Coming up with original ideas",
                typeB: "Creator"
            },
            {
                id: 16,
                question: "I naturally:",
                optionA: "Trust that good things will unfold",
                typeA: "Believer",
                optionB: "Break down complex projects into steps",
                typeB: "Executor"
            },
            {
                id: 17,
                question: "I'm more drawn to:",
                optionA: "Speaking up when others might get hurt",
                typeA: "Protector",
                optionB: "Seeing past what is to what could be",
                typeB: "Dreamer"
            },
            {
                id: 18,
                question: "When working with others I:",
                optionA: "Create organized systems",
                typeA: "Implementer",
                optionB: "Bring fun to any situation",
                typeB: "Entertainer"
            },
            {
                id: 19,
                question: "Others often:",
                optionA: "Open up to me about personal matters",
                typeA: "Healer",
                optionB: "Look to me to take the lead",
                typeB: "Director"
            },
            {
                id: 20,
                question: "I feel most alive when:",
                optionA: "Building something from scratch",
                typeA: "Creator",
                optionB: "Understanding the depths of a situation",
                typeB: "Thinker"
            },
            {
                id: 21,
                question: "My natural response to problems is to:",
                optionA: "Look for structural improvements",
                typeA: "Problem-Solver",
                optionB: "Help everyone feel valued",
                typeB: "Relater"
            },
            {
                id: 22,
                question: "I'm at my best when:",
                optionA: "Inspiring others to take action",
                typeA: "Motivator",
                optionB: "Finding common ground in conflicts",
                typeB: "Peacemaker"
            },
            {
                id: 23,
                question: "I'm most satisfied after:",
                optionA: "Bringing a project to completion",
                typeA: "Executor",
                optionB: "Seeing someone embrace their potential",
                typeB: "Actualizer"
            },
            {
                id: 24,
                question: "My friends would say I:",
                optionA: "Champion causes I care about",
                typeA: "Promoter",
                optionB: "Hold onto hope when others doubt",
                typeB: "Believer"
            },
            {
                id: 25,
                question: "I naturally tend to:",
                optionA: "Trust my intuition about people's hearts",
                typeA: "Healer",
                optionB: "Break down exactly what's going wrong",
                typeB: "Problem-Solver"
            },
            {
                id: 26,
                question: "My natural response is to:",
                optionA: "Make sure no one feels left out",
                typeA: "Peacemaker",
                optionB: "Tell people what they need to hear",
                typeB: "Protector"
            },
            {
                id: 27,
                question: "In difficult times I:",
                optionA: "Find myself stuck in mental loops",
                typeA: "Thinker",
                optionB: "Get lost in daydreams or possibilities",
                typeB: "Dreamer"
            },
            {
                id: 28,
                question: "I'm most satisfied when:",
                optionA: "Working in bursts of inspiration",
                typeA: "Creator",
                optionB: "Seeing something through to completion",
                typeB: "Executor"
            },
            {
                id: 29,
                question: "Others say I:",
                optionA: "Know how to make things excellent",
                typeA: "Actualizer",
                optionB: "Know how to get people to take action",
                typeB: "Motivator"
            },
            {
                id: 30,
                question: "I typically:",
                optionA: "Get others excited about possibilities",
                typeA: "Motivator",
                optionB: "Help others feel deeply understood",
                typeB: "Relater"
            },
            {
                id: 31,
                question: "My friends know me as someone who:",
                optionA: "Brings fun to any situation",
                typeA: "Entertainer",
                optionB: "Brings clarity to any situation",
                typeB: "Director"
            },
            {
                id: 32,
                question: "I naturally:",
                optionA: "Share enthusiastically about what works",
                typeA: "Promoter",
                optionB: "Notice what needs to be fixed first",
                typeB: "Problem-Solver"
            },
            {
                id: 33,
                question: "When working with others I:",
                optionA: "Keep track of all the details",
                typeA: "Implementer",
                optionB: "Keep everyone's spirits high",
                typeB: "Entertainer"
            },
            {
                id: 34,
                question: "My friends would say I:",
                optionA: "Take on their emotional burdens",
                typeA: "Healer",
                optionB: "Take charge when things are unclear",
                typeB: "Director"
            },
            {
                id: 35,
                question: "I tend to:",
                optionA: "Have big dreams about what could be",
                typeA: "Dreamer",
                optionB: "Focus on making current things better",
                typeB: "Actualizer"
            },
            {
                id: 36,
                question: "When faced with a challenge I:",
                optionA: "Look for the most efficient solution",
                typeA: "Executor",
                optionB: "Consider how it affects everyone involved",
                typeB: "Relater"
            },
            {
                id: 37,
                question: "My natural strength is:",
                optionA: "Seeing beyond current limitations",
                typeA: "Creator",
                optionB: "Standing firm against wrong behavior",
                typeB: "Protector"
            },
            {
                id: 38,
                question: "I'm most comfortable when:",
                optionA: "Finding common ground between people",
                typeA: "Peacemaker",
                optionB: "Getting people to take bold action",
                typeB: "Motivator"
            },
            {
                id: 39,
                question: "When things are difficult I:",
                optionA: "Trust everything will work out",
                typeA: "Believer",
                optionB: "Analyze until I understand why",
                typeB: "Thinker"
            },
            {
                id: 40,
                question: "I prefer to:",
                optionA: "Work alone with the details",
                typeA: "Implementer",
                optionB: "Come up with novel ideas",
                typeB: "Creator"
            },
            {
                id: 41,
                question: "In groups I tend to:",
                optionA: "Break the tension with humor",
                typeA: "Entertainer",
                optionB: "Guide people through hard emotions",
                typeB: "Healer"
            },
            {
                id: 42,
                question: "I'm better at:",
                optionA: "Getting projects completed",
                typeA: "Executor",
                optionB: "Making sure everyone is included",
                typeB: "Peacemaker"
            },
            {
                id: 43,
                question: "I'm more likely to:",
                optionA: "Find ways to promote good things",
                typeA: "Promoter",
                optionB: "Create detailed plans for success",
                typeB: "Implementer"
            },
            {
                id: 44,
                question: "Others say I:",
                optionA: "Have unwavering trust in people",
                typeA: "Believer",
                optionB: "Know how to make progress happen",
                typeB: "Executor"
            },
            {
                id: 45,
                question: "My natural response is to:",
                optionA: "Take bold action when needed",
                typeA: "Protector",
                optionB: "Ask questions to understand deeply",
                typeB: "Relater"
            },
            {
                id: 46,
                question: "When leading others I:",
                optionA: "Know how to coordinate diverse teams",
                typeA: "Director",
                optionB: "Know what gets people passionate",
                typeB: "Motivator"
            },
            {
                id: 47,
                question: "I excel at:",
                optionA: "Sharing what excites me",
                typeA: "Promoter",
                optionB: "Breaking down complex problems",
                typeB: "Problem-Solver"
            },
            {
                id: 48,
                question: "My friends say I:",
                optionA: "Always believe the best will happen",
                typeA: "Believer",
                optionB: "Always find a way to make things work",
                typeB: "Director"
            },
            {
                id: 49,
                question: "Others often:",
                optionA: "Follow my enthusiastic suggestions",
                typeA: "Promoter",
                optionB: "Come to me for emotional support",
                typeB: "Healer"
            },
            {
                id: 50,
                question: "I prefer to:",
                optionA: "Build deep connections with others",
                typeA: "Relater",
                optionB: "Create innovative solutions",
                typeB: "Creator"
            },
            {
                id: 51,
                question: "I naturally:",
                optionA: "See what needs to be improved",
                typeA: "Actualizer",
                optionB: "Find ways to lift people's spirits",
                typeB: "Entertainer"
            },
            {
                id: 52,
                question: "When stressed I tend to:",
                optionA: "Get lost in analysis",
                typeA: "Thinker",
                optionB: "Trust everything will work out",
                typeB: "Believer"
            },
            {
                id: 53,
                question: "I'm most effective when:",
                optionA: "Working through complex details",
                typeA: "Implementer",
                optionB: "Inspiring others to act",
                typeB: "Motivator"
            },
            {
                id: 54,
                question: "I'm most comfortable:",
                optionA: "Getting to know someone deeply",
                typeA: "Relater",
                optionB: "Making a group feel energized",
                typeB: "Motivator"
            },
            {
                id: 55,
                question: "I tend to:",
                optionA: "Dream about future possibilities",
                typeA: "Dreamer",
                optionB: "Notice what steps need to be taken",
                typeB: "Implementer"
            },
            {
                id: 56,
                question: "Others seek me out to:",
                optionA: "Share their personal struggles",
                typeA: "Healer",
                optionB: "Get clear direction on projects",
                typeB: "Director"
            },
            {
                id: 57,
                question: "I naturally:",
                optionA: "Stand firm when something's wrong",
                typeA: "Protector",
                optionB: "Find ways to keep peace in groups",
                typeB: "Peacemaker"
            },
            {
                id: 58,
                question: "I prefer:",
                optionA: "Getting lost in creative projects",
                typeA: "Creator",
                optionB: "Getting things accomplished",
                typeB: "Executor"
            },
            {
                id: 59,
                question: "My friends know I:",
                optionA: "Can solve most problems quickly",
                typeA: "Problem-Solver",
                optionB: "Can promote anything effectively",
                typeB: "Promoter"
            },
            {
                id: 60,
                question: "I'm satisfied when:",
                optionA: "Making others feel good",
                typeA: "Entertainer",
                optionB: "Making others feel understood",
                typeB: "Relater"
            },
            {
                id: 61,
                question: "When challenged I:",
                optionA: "Think through every angle",
                typeA: "Thinker",
                optionB: "Trust in positive outcomes",
                typeB: "Believer"
            },
            {
                id: 62,
                question: "I excel at:",
                optionA: "Seeing potential in situations",
                typeA: "Actualizer",
                optionB: "Living in a world of possibilities",
                typeB: "Dreamer"
            },
            {
                id: 63,
                question: "Others say I:",
                optionA: "Know how to analyze any situation",
                typeA: "Thinker",
                optionB: "Know how to fix what's broken",
                typeB: "Problem-Solver"
            },
            {
                id: 64,
                question: "My natural tendency is to:",
                optionA: "Dream up new possibilities",
                typeA: "Dreamer",
                optionB: "Take action to protect others",
                typeB: "Protector"
            }
        ];

function startAssessment() {
            document.getElementById('assessmentIntro').classList.add('hidden');
            document.getElementById('assessmentQuestions').classList.remove('hidden');
            
            // Load all 64 questions
            loadedQuestions = assessmentQuestions;
            currentQuestionIndex = 0;
            userAnswers = [];
            
            displayQuestion();
        }

      function displayQuestion() {
            const question = loadedQuestions[currentQuestionIndex];
            
            document.getElementById('questionNumber').textContent = currentQuestionIndex + 1;
            document.getElementById('progressText').textContent = `${currentQuestionIndex + 1} / ${loadedQuestions.length}`;
            document.getElementById('progressFill').style.width = `${((currentQuestionIndex + 1) / loadedQuestions.length) * 100}%`;
            document.getElementById('questionText').textContent = question.question;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = `
                <div class="option" onclick="selectOption('A')" data-option="A">
                    ${question.optionA}
                </div>
                <div class="option" onclick="selectOption('B')" data-option="B">
                    ${question.optionB}
                </div>
            `;
            
            // Show/hide navigation buttons
            document.getElementById('prevBtn').style.display = currentQuestionIndex > 0 ? 'block' : 'none';
            document.getElementById('nextBtn').disabled = true;
            document.getElementById('nextBtn').textContent = currentQuestionIndex === assessmentQuestions.length - 1 ? 'Complete Assessment' : 'Next Question';
        }

        function selectOption(option) {
            // Remove previous selection
            document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
            
            // Add selection to clicked option
            document.querySelector(`[data-option="${option}"]`).classList.add('selected');
            
            // Store answer
            const question = loadedQuestions[currentQuestionIndex];
            userAnswers[currentQuestionIndex] = {
                questionId: question.id,
                selectedOption: option,
                type: option === 'A' ? question.typeA : question.typeB
            };
            
            // Enable next button
            document.getElementById('nextBtn').disabled = false;
        }

      function nextQuestion() {
            if (currentQuestionIndex < loadedQuestions.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                completeAssessment();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion();
                
                // Restore previous selection if exists
                const previousAnswer = userAnswers[currentQuestionIndex];
                if (previousAnswer) {
                    document.querySelector(`[data-option="${previousAnswer.selectedOption}"]`).classList.add('selected');
                    document.getElementById('nextBtn').disabled = false;
                }
            }
        }

        function completeAssessment() {
            document.getElementById('assessmentQuestions').classList.add('hidden');
            document.getElementById('assessmentComplete').classList.remove('hidden');
            
            // Calculate results and redirect to results page
            setTimeout(() => {
                calculateAndSaveResults();
            }, 2000);
        }

       async function calculateAndSaveResults() {
    // Calculate personality type scores
    const typeScores = {};
    
    userAnswers.forEach(answer => {
        if (typeScores[answer.type]) {
            typeScores[answer.type]++;
        } else {
            typeScores[answer.type] = 1;
        }
    });
    
    // Sort by highest scores
    const sortedTypes = Object.entries(typeScores)
        .sort(([,a], [,b]) => b - a)
        .slice(0, 3);
    
    // Prepare results object
    const results = {
        completedAt: new Date().toISOString(),
        allScores: typeScores,
        topThree: sortedTypes,
        totalQuestions: loadedQuestions.length
    };
    
    // Always save to localStorage as backup
    localStorage.setItem('personalityTestResults', JSON.stringify(results));
    
    // Try to save to server
    try {
        await saveTestResultsToServer(userAnswers, results);
    } catch (error) {
        console.error('Error saving to server:', error);
        // Continue anyway - localStorage backup exists
    }
    
    // Redirect to results page
    window.location.href = 'personality-results.html';
}

// ADD this new function right after calculateAndSaveResults():
async function saveTestResultsToServer(answers, results) {
    try {
        const token = localStorage.getItem('authToken') || localStorage.getItem('token');
        
        if (!token) {
            console.log('ℹ️ No auth token, saved to localStorage only');
            return { success: false, message: 'Saved locally only' };
        }

        const response = await fetch('/api/personality-test/results', {
            method: 'POST',
            headers: {
                'Authorization': `Bearer ${token}`,
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                answers: answers,
                results: results
            })
        });
        
        if (response.ok) {
            const data = await response.json();
            console.log('✅ Results saved to server:', data.message);
            return { success: true, message: 'Results saved successfully' };
        } else {
            console.error('❌ Failed to save to server:', response.status);
            return { success: false, message: 'Saved locally only' };
        }
    } catch (error) {
        console.error('❌ Error saving results:', error);
        return { success: false, message: 'Saved locally only' };
    }
}

        function logout() {
            localStorage.clear();
            window.location.href = 'index.html';
        }
    </script>
</body>
</html>
